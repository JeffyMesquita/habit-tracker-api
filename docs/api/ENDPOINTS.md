# üì° **API ENDPOINTS - DOCUMENTA√á√ÉO COMPLETA**

> **Lista consolidada** de todas as APIs do Habit Tracker - Status atual, funcionalidades e exemplos de uso.

---

## üéØ **Status Geral das APIs**

### **üìä Resumo por M√≥dulo**

| M√≥dulo         | APIs    | Status      | Testes      | Documentation |
| -------------- | ------- | ----------- | ----------- | ------------- |
| Authentication | 8       | ‚úÖ Complete | ‚úÖ 12 tests | ‚úÖ Full       |
| Habits         | 8       | ‚úÖ Complete | ‚úÖ 15 tests | ‚úÖ Full       |
| Goals          | 7       | ‚úÖ Complete | ‚úÖ 22 tests | ‚úÖ Full       |
| Achievements   | 4       | ‚úÖ Complete | ‚úÖ 14 tests | ‚úÖ Full       |
| Analytics      | 2       | ‚úÖ Complete | ‚úÖ 11 tests | ‚úÖ Full       |
| Reports        | 3+      | ‚úÖ Complete | ‚ùå 0 tests  | ‚úÖ Full       |
| User Profile   | 3       | ‚úÖ Complete | ‚úÖ 6 tests  | ‚úÖ Full       |
| Notifications  | 0       | üìã Sprint 3 | ‚ùå 0 tests  | üìã Planning   |
| **TOTAL**      | **34+** | **‚úÖ 94%**  | **‚úÖ 62**   | **‚úÖ 94%**    |

---

## üîê **Authentication APIs (8 endpoints)**

### **POST /app/user/register**

- **Fun√ß√£o**: Registro de novo usu√°rio
- **Status**: ‚úÖ Complete
- **Body**: `{ email, password, firstName, lastName?, occupation?, bio? }`
- **Response**: `{ message, code, data: { user, accessToken, refreshToken } }`
- **Valida√ß√µes**: Email √∫nico, senha segura, campos obrigat√≥rios

### **POST /app/user/login**

- **Fun√ß√£o**: Autentica√ß√£o de usu√°rio
- **Status**: ‚úÖ Complete
- **Body**: `{ email, password }`
- **Response**: `{ message, code, data: { user, accessToken, refreshToken } }`
- **Features**: JWT + Refresh Token, rate limiting

### **POST /app/user/confirm-email**

- **Fun√ß√£o**: Confirma√ß√£o de email com c√≥digo
- **Status**: ‚úÖ Complete
- **Body**: `{ email, confirmationCode }`
- **Response**: `{ message, code }`
- **Security**: C√≥digo tempor√°rio (15min), rate limiting

### **POST /app/user/resend-email**

- **Fun√ß√£o**: Reenvio de c√≥digo de confirma√ß√£o
- **Status**: ‚úÖ Complete
- **Body**: `{ email }`
- **Response**: `{ message, code }`
- **Limits**: 3 tentativas por hora

### **POST /app/user/forgot-password**

- **Fun√ß√£o**: Solicita√ß√£o de reset de senha
- **Status**: ‚úÖ Complete
- **Body**: `{ email }`
- **Response**: `{ message, code }`
- **Flow**: Email ‚Üí C√≥digo ‚Üí Reset

### **POST /app/user/reset-password**

- **Fun√ß√£o**: Reset de senha com c√≥digo
- **Status**: ‚úÖ Complete
- **Body**: `{ email, resetCode, newPassword }`
- **Response**: `{ message, code }`
- **Security**: C√≥digo √∫nico, expira√ß√£o 30min

### **POST /app/user/refresh-token**

- **Fun√ß√£o**: Renova√ß√£o de access token
- **Status**: ‚úÖ Complete
- **Body**: `{ refreshToken }`
- **Response**: `{ message, code, data: { accessToken, refreshToken } }`
- **Security**: Rota√ß√£o de refresh tokens

### **POST /app/user/logout**

- **Fun√ß√£o**: Logout com invalida√ß√£o de tokens
- **Status**: ‚úÖ Complete
- **Headers**: `Authorization: Bearer {token}`
- **Response**: `{ message, code }`
- **Action**: Invalidates all user tokens

---

## üìã **Habits Management APIs (8 endpoints)**

### **POST /app/habits**

- **Fun√ß√£o**: Criar novo h√°bito
- **Status**: ‚úÖ Complete
- **Auth**: Required (JWT)
- **Body**: `{ title, frequency, weekDays, moment? }`
- **Validations**: T√≠tulo √∫nico por usu√°rio, frequ√™ncia 1-10
- **Response**: H√°bito criado com valida√ß√µes

### **GET /app/habits**

- **Fun√ß√£o**: Listar h√°bitos com filtros
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Query**: `period, includeProgress, limit, offset`
- **Filters**: hoje, semana, m√™s, trimestre, ano, personalizado
- **Response**: Lista paginada com progresso opcional

### **GET /app/habits/today**

- **Fun√ß√£o**: H√°bitos espec√≠ficos de hoje
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Response**: H√°bitos com progresso do dia atual
- **Features**: Otimizado para dashboard

### **GET /app/habits/:id**

- **Fun√ß√£o**: Buscar h√°bito espec√≠fico
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Params**: `habitId`
- **Response**: H√°bito completo com relacionamentos
- **Includes**: weekDays, progresso recente

### **PUT /app/habits/:id**

- **Fun√ß√£o**: Atualizar h√°bito
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: `{ title?, frequency?, weekDays?, moment? }`
- **Validations**: Mesmas do create, t√≠tulo √∫nico
- **Response**: H√°bito atualizado

### **DELETE /app/habits/:id**

- **Fun√ß√£o**: Deletar h√°bito
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Action**: Soft delete + cascata (progresso, weekDays)
- **Response**: Confirma√ß√£o de dele√ß√£o

### **POST /app/habits/:id/progress**

- **Fun√ß√£o**: Registrar progresso di√°rio
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: `{ completedCount, date }`
- **Logic**: Upsert autom√°tico, valida√ß√£o de limites
- **Integration**: Triggers achievements + goals

### **GET /app/habits/:id/progress**

- **Fun√ß√£o**: Hist√≥rico e estat√≠sticas
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Query**: `period, includeStats`
- **Response**: Hist√≥rico + taxa conclus√£o + streaks
- **Analytics**: 30 dias de hist√≥rico detalhado

---

## üéØ **Goals System APIs (7 endpoints)**

### **POST /app/goals**

- **Fun√ß√£o**: Criar meta personalizada
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: `{ goalType, targetValue, startDate, endDate, title, description?, priority?, habitId? }`
- **Types**: habit_completion, streak_days, consistency_percentage
- **Validations**: Datas v√°lidas, conflitos, habit existence

### **GET /app/goals**

- **Fun√ß√£o**: Listar metas com filtros
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Query**: `status, goalType, priority, limit, offset`
- **Filters**: active, completed, paused, cancelled
- **Response**: Metas com progresso calculado

### **GET /app/goals/:id**

- **Fun√ß√£o**: Buscar meta espec√≠fica
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Response**: Meta completa com progresso detalhado
- **Calculations**: Progresso real-time baseado em h√°bitos

### **PUT /app/goals/:id**

- **Fun√ß√£o**: Atualizar meta
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: Campos opcionais da meta
- **Validations**: Datas consistentes, l√≥gica de neg√≥cio
- **Response**: Meta atualizada

### **DELETE /app/goals/:id**

- **Fun√ß√£o**: Deletar meta
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Action**: Soft delete, mant√©m hist√≥rico
- **Response**: Confirma√ß√£o

### **GET /app/goals/:id/progress**

- **Fun√ß√£o**: Progresso detalhado da meta
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Response**: Progresso com m√©tricas e timeline
- **Features**: C√°lculo autom√°tico baseado em h√°bitos

### **POST /app/goals/:id/complete**

- **Fun√ß√£o**: Marcar meta como completa manualmente
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: N√£o requer body
- **Features**: Timestamp autom√°tico, integra√ß√£o com achievements
- **Validations**: Meta existe, n√£o est√° completa, pertence ao usu√°rio
- **Response**: Confirma√ß√£o com timestamp de conclus√£o

---

## üèÜ **Achievements System APIs (4 endpoints)**

### **POST /app/achievements/unlock**

- **Fun√ß√£o**: Desbloquear achievement manual
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: `{ achievementCode, userId? }`
- **Use Cases**: Admin unlock, special events
- **Response**: Achievement desbloqueado

### **GET /app/achievements**

- **Fun√ß√£o**: Listar achievements do usu√°rio
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Query**: `status, category, rarity, limit, offset`
- **Filters**: unlocked, locked, category filtering
- **Response**: Lista com progresso e stats

### **GET /app/achievements/stats**

- **Fun√ß√£o**: Estat√≠sticas de achievements
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Response**: Stats por categoria, total points, progress
- **Analytics**: Performance metrics

### **GET /app/achievements/:id**

- **Fun√ß√£o**: Detalhes do achievement
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Response**: Achievement completo com requirements
- **Includes**: Unlock history, related achievements

---

## üìä **Analytics APIs (2 endpoints)**

### **GET /app/analytics/dashboard**

- **Fun√ß√£o**: Dashboard consolidado
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Query**: `period, includeHabitDetails, includeComparisons`
- **Response**: M√©tricas consolidadas com trends
- **Features**: Filtros flex√≠veis, compara√ß√µes

### **GET /app/analytics/streaks**

- **Fun√ß√£o**: Sistema de streaks
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Query**: `type, limit, includeHistory`
- **Response**: Streaks atuais + hist√≥rico + best
- **Types**: all, habit-specific, global

---

## üìà **Reports APIs (3+ endpoints)**

### **POST /app/reports/generate**

- **Fun√ß√£o**: Gerar relat√≥rio customizado avan√ßado
- **Status**: ‚úÖ Complete with Enhanced Features
- **Auth**: Required
- **Body**: `{ type, period, format, filters, includeAchievements? }`
- **Types**: weekly, monthly, custom, quarterly, yearly
- **Formats**: JSON, CSV, PDF
- **üÜï Enhanced Features**:
  - **Category Breakdown**: An√°lise por categoria de h√°bito
  - **Top Categories**: Ranking das 3 melhores categorias
  - **Individual Streak Tracking**: Streaks espec√≠ficos por h√°bito
  - **Advanced Insights**: An√°lise autom√°tica de performance
- **Response Structure**:

```json
{
  "data": {
    "period": { "startDate": "2025-01-01", "endDate": "2025-01-29" },
    "summary": {
      "totalHabits": 5,
      "totalCompletions": 85,
      "overallCompletionRate": 78.5,
      "activeDays": 22,
      "categoryBreakdown": {
        "Sa√∫de": { "completionRate": 85.2, "totalHabits": 2, "completedDays": 23, "totalDays": 27 },
        "Fitness": { "completionRate": 72.1, "totalHabits": 2, "completedDays": 39, "totalDays": 54 },
        "Trabalho": { "completionRate": 90.3, "totalHabits": 1, "completedDays": 28, "totalDays": 31 }
      }
    },
    "habits": [
      {
        "id": "habit-123",
        "name": "Exercitar-se",
        "category": "Fitness",
        "daysCompleted": 20,
        "totalDays": 29,
        "completionRate": 68.97,
        "currentStreak": 5,
        "longestStreak": 12
      }
    ],
    "insights": {
      "bestPerformingHabits": [...],
      "needsAttentionHabits": [...],
      "topCategories": [
        { "category": "Trabalho", "completionRate": 90.3, "totalHabits": 1 },
        { "category": "Sa√∫de", "completionRate": 85.2, "totalHabits": 2 },
        { "category": "Fitness", "completionRate": 72.1, "totalHabits": 2 }
      ],
      "weeklyTrends": [...]
    }
  }
}
```

### **GET /app/reports/weekly**

- **Fun√ß√£o**: Relat√≥rio semanal automatizado com categoria analysis
- **Status**: ‚úÖ Complete with Enhanced Analytics
- **Auth**: Required
- **Query**: `format, includeInsights, weekOffset?`
- **Response**: Relat√≥rio da semana atual/espec√≠fica
- **üÜï Features**:
  - Category performance por semana
  - Individual habit streak tracking
  - Week number e compara√ß√µes
  - Top categories da semana

### **GET /app/reports/monthly**

- **Fun√ß√£o**: Relat√≥rio mensal automatizado com insights avan√ßados
- **Status**: ‚úÖ Complete with Enhanced Analytics
- **Auth**: Required
- **Query**: `format, includeYearComparison, monthOffset?`
- **Response**: Relat√≥rio do m√™s atual/espec√≠fico
- **üÜï Features**:
  - Monthly category breakdown
  - Month-over-month comparisons
  - Localized month names (pt-BR)
  - Enhanced habit analytics per category

---

## üë§ **User Profile APIs (3 endpoints)**

### **GET /app/user/me**

- **Fun√ß√£o**: Visualizar perfil completo
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Response**: Dados do usu√°rio + perfil + stats
- **Includes**: Account info, preferences, statistics

### **PUT /app/user/profile**

- **Fun√ß√£o**: Atualizar dados pessoais
- **Status**: ‚úÖ Complete
- **Auth**: Required
- **Body**: `{ firstName?, lastName?, bio?, occupation?, birthDate?, avatar? }`
- **Validations**: Data formats, string lengths
- **Response**: Perfil atualizado

---

## üöÄ **Pr√≥ximas APIs (Sprint 3)**

### **üìß Notifications APIs (8-10 endpoints)**

- **POST /app/notifications/send** - Enviar notifica√ß√£o manual
- **POST /app/notifications/schedule** - Agendar notifica√ß√£o
- **GET /app/notifications/preferences** - Ver prefer√™ncias
- **PUT /app/notifications/preferences** - Atualizar prefer√™ncias
- **POST /app/notifications/test/:type** - Teste de notifica√ß√£o
- **POST /app/notifications/devices** - Registrar dispositivo
- **DELETE /app/notifications/devices/:id** - Remover dispositivo
- **GET /app/notifications/analytics** - M√©tricas (Admin)
- **GET /app/notifications/logs** - Logs (Admin)

---

## üîß **Padr√µes das APIs**

### **üîê Autentica√ß√£o**

```typescript
Headers: {
  'Authorization': 'Bearer {accessToken}',
  'Content-Type': 'application/json'
}
```

### **üìù Response Format**

```typescript
{
  message: string;
  code: string;
  data?: any;
  error?: string;
  timestamp: string;
}
```

### **‚ùå Error Handling**

```typescript
{
  message: "Error description",
  code: "ERROR_CODE",
  error: "Detailed error message",
  statusCode: 400,
  timestamp: "2025-01-29T19:30:00Z"
}
```

### **üìä Pagination**

```typescript
{
  data: any[];
  pagination: {
    total: number;
    page: number;
    limit: number;
    hasNext: boolean;
    hasPrevious: boolean;
  }
}
```

---

## üìã **API Testing Status**

### **‚úÖ Testados (62 testes)**

- Authentication: 12 testes
- Habits: 15 testes
- Goals: 22 testes
- Achievements: 14 testes
- Analytics: 11 testes
- User Profile: 6 testes

### **üìã Pendentes**

- Reports: 0 testes (funcional mas sem cobertura)
- Notifications: Sprint 3

---

## üìû **Suporte & Documenta√ß√£o**

### **üîó Links √öteis**

- **Swagger UI**: http://localhost:3333/api
- **Postman Collection**: Em desenvolvimento
- **API Tests**: `/test` directory
- **Error Codes**: `src/misc/API/codes/`

### **üë• Respons√°veis**

- **Backend APIs**: Backend Team
- **Documentation**: Tech Lead
- **Testing**: QA + Dev Team

---

**üìÖ √öltima atualiza√ß√£o**: Janeiro 2025 | **Total APIs**: 34+ funcionais

**üéØ Pr√≥xima atualiza√ß√£o**: Sprint 3 - Notifications APIs\*\*
